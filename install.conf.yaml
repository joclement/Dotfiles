---
- defaults:
    link:
      relink: true

- clean: ['~', '~/.vim']

- link:
    ~/.antigen:
    ~/.autocompletion_zsh:
    ~/.bash_profile:
      force: true
      path: bash_profile
    ~/.bashrc:
      force: true
      path: bashrc
    ~/.config/Code/User/settings.json:
      create: true
      path: vscode/settings.json
    ~/.config/Code/User/snippets:
      create: true
      path: vscode/snippets
      force: true
    ~/.config/nvim/init.vim:
      create: true
      path: nvim/init.vim
    ~/.config/zathura:
      create: true
      path: config/zathura
    ~/.dircolors-solarized:
    ~/.env:
    ~/.fzf:
    ~/.gitconfig:
    ~/.github_userconfig:
    ~/.gitignore:
    ~/.gvimrc:
    ~/.ideavimrc:
    ~/.inputrc:
    ~/.profile:
      force: true
      path: profile
    ~/.pyenv:
    ~/.shared_aliases:
    ~/.shared_shell:
    ~/.tmux.conf:
    ~/.vim/pack:
      create: true
      path: vim/pack
    ~/.vim/coc-settings.json:
      create: true
      path: vim/coc-settings.json
    ~/.vim/ftplugin:
      create: true
      path: vim/ftplugin
    ~/.vimrc:
    ~/.yamllint:
    ~/.zprofile:
    ~/.zsh-syntax-highlighting:
    ~/.zshenv:
    ~/.zshrc:

- create:
    - ~/.git-template
    - ~/.vim/plugin
    - ~/.zfunc

- shell:
    - git submodule update --recursive --init
    - sudo apt-get update
    # Install pyenv dependencies
    - >
      sudo apt-get install -y libedit-dev \
                              libssl-dev \
                              zlib1g-dev \
                              libbz2-dev \
                              libreadline-dev \
                              libsqlite3-dev \
                              llvm \
                              libncursesw5-dev \
                              xz-utils \
                              tk-dev \
                              libxml2-dev \
                              libxmlsec1-dev \
                              libffi-dev \
                              liblzma-dev
    - description: Install package for fc-cache
      command: sudo apt-get install -y fontconfig
    - >
      sudo apt-get install -y build-essential \
                              curl \
                              dconf-cli \
                              parallel \
                              python-is-python3 \
                              python3-dev \
                              python3-pip \
                              python3-venv \
                              silversearcher-ag \
                              vim-gtk \
                              zsh
    - command: ./install.sh
      stdout: true
      stderr: true
    - command: ./configure_powerlevel10k.sh
    - command: echo 'Run `chsh -s $(which zsh)`'
      stdout: true
      stderr: true
    - command: ./install-vim-plugins.sh
      stdout: true
      stderr: true
